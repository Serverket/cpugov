#!/usr/bin/make -f
# SPDX-License-Identifier: GPL-3.0-or-later

%:
	dh $@

override_dh_auto_configure:
	dh_auto_configure -- -Ddaemon=true

override_dh_auto_clean:
	dh_auto_clean
	rm -rf builddir obj-x86_64-linux-gnu subprojects

override_dh_auto_install:
	dh_auto_install
	# Move systemd unit from /usr/lib/systemd/system to /lib/systemd/system
	# This is required for standard Debian packaging compatibility
	if [ -d debian/cpugov/usr/lib/systemd/system ]; then \
		mkdir -p debian/cpugov/lib/systemd/system; \
		mv debian/cpugov/usr/lib/systemd/system/* debian/cpugov/lib/systemd/system/; \
		rm -rf debian/cpugov/usr/lib/systemd; \
	fi
